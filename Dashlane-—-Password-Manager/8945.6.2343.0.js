"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[8945],{182401:(e,t,a)=>{a.r(t),a.d(t,{NoteAddPanel:()=>k});var s=a(66941),i=a(947843),o=a(988799),n=a(696832),c=a(142897),r=a(661410),u=a(148038),d=a(537026),l=a(62429),S=a(635164),h=a(676849),g=a(38025),m=a(60043),p=a(885131),y=a(796446),N=a(234931),C=a(97242),b=a(507525),I=a(396119),T=a(919663),f=a(83541),w=a(925394);const{CONTENT:A,DOCUMENT_STORAGE:E}=N.SecureNoteTabs,F={noteCategories:{query:s.C.getNoteCategories}},P={strategies:F},k=(0,i.$)((0,o.i)((({lee:e,noteCategories:t})=>{var a,i;const{routes:o}=(0,m.Xo)(),N=(0,T.aV)(),F=(0,g.Y)(),{openPaywall:P}=(0,h.nL)(),k=(0,S.k6)(),[v,_]=(0,n.useState)(A),[D,O]=(0,n.useState)(!1),[U,V]=(0,n.useState)(!1),[Z,q]=(0,n.useState)([]),[R,B]=(0,n.useState)({category:"noCategory",type:"GRAY",spaceId:null!=(a=(0,d.B)(e.globalState))?a:"",secured:!1}),[G,L]=(0,n.useState)(!1),[M,X]=(0,n.useState)(!1),[Y,x]=(0,n.useState)(""),[z,H]=(0,n.useState)(""),K={attachments:Z.map(C.w),id:"",limitedPermissions:!1,content:Y,title:z,...R};if((0,n.useEffect)((()=>{(0,l.Nc)(r.PageView.ItemSecureNoteCreate)}),[]),F.status!==u.rq.Success||!F?.data)return null;const Q=(0,f.n6)(f.Co.SecureNotes,F.data?.capabilities),W=()=>{(0,l.Nc)(r.PageView.ItemSecureNoteList),(0,I.P)(),(0,S.uX)(o.userSecureNotes)},$=()=>O(!0);return Q&&(P(f.qd.SecureNote),k.push("/secure-notes")),(0,c.tZ)(y.zI,{isViewingExistingItem:!1,itemHasBeenEdited:D,submitPending:U,onSubmit:async()=>{if(!U){V(!0);try{await(async()=>{await s.C.addSecureNote({...R,content:Y,title:z,attachments:K.attachments}),q([])})()}catch{V(!1)}W()}},secondaryActions:v===E?[i||(i=(0,c.tZ)(b.d,{isQuotaReached:!1,isShared:!1,onFileUploadStarted:()=>{L(!0)},onFileUploadDone:async e=>{L(!1),e.success&&(await s.C.commitSecureFile({secureFileInfo:e.secureFileInfo}),q([...Z,e.secureFileInfo]),O(!0))},key:"uploadAction",dataType:"KWSecureNote"}))]:[],primaryActions:[],onNavigateOut:()=>{Z.forEach((async e=>{const{Id:t}=e;await s.C.deleteSecureFile({id:t})})),(0,I.P)(),q([]),W()},formId:"add_securenote_panel",header:(0,c.tZ)(w.h,{activeTab:v,backgroundColor:K.type,displayDocumentStorage:!0,displaySharedAccess:!1,setActiveTab:_,title:z,setTitle:e=>{$(),H(e)}})},(0,c.tZ)(p.T,{activeTab:v,data:K,content:Y,setContent:x,handleFileInfoDetached:e=>{q(Z.filter((t=>t.Id!==e)))},hasAttachment:!1,isAdmin:!1,isSecureNoteAttachmentEnabled:N,isShared:!1,isUploading:G,lee:e,noteCategories:t.items,onModifyData:$,saveSecureNoteOptions:B,isEditing:M,setIsEditing:X}))}),P),F)}}]);
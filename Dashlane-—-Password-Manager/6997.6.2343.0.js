"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[6997],{542590:(e,t,i)=>{i.r(t),i.d(t,{CredentialEditPanel:()=>We});var a=i(696832),n=i(66941),s=i(947843),r=i(988799),l=i(846097),o=i(799852),d=i(995445),c=i(133354),p=i(769569),u=i(604400),m=i(448430),_=i(889483),h=i(383849),b=i.n(h),g=i(453576),k=i(482598),y=i(385441),w=i(441217),S=i(299074),f=i(96862),C=i(787268),x=i(915970),v=i(201389),E=i(635164),I=i(796446),D=i(702394),A=i(905586),P=i(372814),L=i(159515),Z=i(793071),W=i(880706),T=i(642844),N=i(846658),U=i(169600),G=i(572108),q=i(661410),B=i(164718),R=i(62429);const V=async e=>await Promise.all(e.map((e=>(0,q.hashDomain)(new B.Y(e).getRootDomain()))));var z,H=i(38069),O=i(488856),F=i(159713);const J=a.memo((({credential:e,onClose:t,openWithNewUrlField:i,onUpdateLinkedWebsitesAddedByUser:n,hasLimitedRights:s,dashlaneDefinedLinkedWebsites:r})=>{const{translate:l}=(0,v.Z)(),[o,d]=a.useState(e.linkedWebsites.addedByUser),[c,p]=a.useState(i);return a.useEffect((()=>{const t=e.linkedWebsites.addedByUser,i=!(t.length===o.length&&t.every(((e,t)=>o[t]===e)));p(i),n(o)}),[o]),a.createElement("div",{className:O.Z.form,"data-testid":"linked-websites-tab"},a.createElement("div",{className:F.Z.header},a.createElement("button",{className:F.Z.backButton,onClick:t},z||(z=a.createElement(w.wyc,{size:12}))),a.createElement(w.X6q,{size:"small"},l("webapp_credential_linked_websites_title"))),a.createElement("div",{className:O.Z.containerBlock},a.createElement(H.a,{label:"webapp_credential_linked_websites_section_primary",linkedWebsitesList:[e.url],areItemsLocked:s,credentialId:e.id,isEditing:!1})),a.createElement("div",{className:O.Z.containerBlock},a.createElement(H.a,{label:"webapp_credential_linked_websites_section_added_by_user",linkedWebsitesList:o,areItemsLocked:s,credentialId:e.id,isListEditable:!s,isEditing:c,showUrlProtocol:!0,updateLinkedWebsitesList:d})),r&&r.length>1?a.createElement("div",{className:O.Z.containerBlock},a.createElement(H.a,{label:"webapp_credential_linked_websites_section_added_by_dashlane",linkedWebsitesList:r,areItemsLocked:!0,credentialId:e.id,isEditing:!1})):null)})),M=({onClose:e,setDisplayLinkedWebsitesDataSavedAlert:t})=>{const{translate:i}=(0,v.Z)();return(0,a.useRef)(null).current=window.setTimeout((()=>t(!1)),5e3),a.createElement(w.YcA,null,a.createElement(w.bZj,{size:w.k3y.SMALL,severity:w.BLW.SUCCESS,closeIconName:i("_common_alert_dismiss_button"),onClose:e},i("_common_toast_changes_saved")))};var X=i(542293);const j=({onCancel:e,onLeavePageWithoutSaving:t})=>{const{translate:i}=(0,v.Z)();return a.createElement(X.o,{isOpen:!0,showCloseIcon:!0,title:i("webapp_credential_linked_websites_discard_dialog_title"),onRequestClose:e,footer:a.createElement(w.Ejs,{justifyContent:"end",gap:"8px"},a.createElement(w.zxk,{type:"button",nature:"secondary",onClick:e},i("webapp_credential_linked_websites_discard_dialog_cancel")),a.createElement(w.zxk,{type:"button",onClick:t},i("webapp_credential_linked_websites_discard_dialog_discard")))},a.createElement(w.Ejs,{flexDirection:"column",gap:"8px",sx:{width:"576px"}},a.createElement(w.nvN,null,i.markup("webapp_credential_linked_websites_discard_dialog_description_markup"))))},K=({duplicateData:e,onCancel:t,onSave:i})=>{const{translate:n}=(0,v.Z)(),s=e.length>1,r=s?n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_one",{url:e[0].linkedWebsite}),l=s?n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_one",{credentialName:e[0].credentialName}),o=n(s?"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_multiple":"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_one");return a.createElement(X.o,{isOpen:!0,showCloseIcon:!0,title:r,onRequestClose:t,footer:a.createElement(w.Ejs,{justifyContent:"end",gap:"8px"},a.createElement(w.zxk,{type:"button",nature:"secondary",onClick:t},n("webapp_credential_linked_websites_duplicate_prevention_dialog_cancel")),a.createElement(w.zxk,{type:"button",onClick:i},o))},a.createElement("div",null,a.createElement("p",null,l),s?a.createElement("ul",{className:"duplicatesList--SwGmL5ftwe"},e.map((e=>a.createElement("li",{key:e.linkedWebsite,className:"duplicateItem--mPX5urdfL2"},e.linkedWebsite)))):null))};var Y,$=i(142897);const Q="webapp_password_history_detailed_password_view_button",ee=({credentialId:e,credHasPasswordHistory:t})=>{const{translate:i}=(0,v.Z)(),{routes:n}=(0,E.Xo)(),s=n.userPasswordHistoryFilteredByCredential(e);return t?a.createElement("div",null,a.createElement(E.rU,{to:s,tabIndex:-1},a.createElement($.zx,{mood:"neutral",intensity:"quiet",title:i(Q),icon:Y||(Y=a.createElement(w.tru,null)),layout:"iconLeading"},i(Q)))):null};var te=i(60043),ie=i(121911),ae=i(102511),ne=i(51119),se=i(281086),re=i(782038);const le={exit:"exit--p4spwlkedE",exitActive:"exitActive--BIpaDF7MkX",exitDone:"exitDone--KzowOK4h4K",appear:"appear--OcvlWdq5He",appearActive:"appearActive--HVwCcEJzKz",appearDone:"appearDone--KgBJPzbyTA"},oe=a.memo((({onPrimaryClick:e})=>{const{translate:t}=(0,v.Z)(),[i,n]=a.useState(!1);return a.createElement(re.Z,{appear:!0,in:!i,timeout:600,classNames:le,onExited:e},a.createElement("div",{className:"infoboxWrapper--wv1g66AwDu"},a.createElement(w.vDh,{title:a.createElement("div",{className:"boxTitle--OPmhjIjNsk"},t("webapp_credential_edition_health_box_excluded_title")),severity:"subtle",size:"descriptive",actions:[a.createElement(w.zxk,{nature:"primary",onClick:e=>{e.preventDefault(),n(!0)},key:"primaryAction",size:"small",type:"button"},t("webapp_credential_edition_health_box_include"))]},a.createElement("div",{className:"descriptionWarning--MZGXiyazU_"},t("webapp_credential_edition_health_box_excluded_description")))))}));var de=i(504253),ce=i(151796);const pe={appear:"appear--MMCjEcRU3u",appearActive:"appearActive--LG103cUrNZ",appearDone:"appearDone--tuYaN3WTGO"},ue=a.memo((({onPrimaryClick:e,onSecondaryClick:t,isLimitedSharingPassword:i,corruptionData:a})=>{const{translate:n}=(0,v.Z)();if(!a)return null;const s=((e,t)=>{const{riskType:i}=e;switch(i){case de.gI.Compromised:return{title:t("webapp_credential_edition_health_box_compromised_title"),description:t("webapp_credential_edition_health_box_compromised_description"),secondary:t("webapp_credential_edition_health_box_view_compromised")};case de.gI.Reused:return{title:t("webapp_credential_edition_health_box_reused_title"),description:t.markup("webapp_credential_edition_health_box_reused_description_markup",{count:e.reuseCount}),secondary:t("webapp_credential_edition_health_box_view_reused")};case de.gI.Weak:return{title:t("webapp_credential_edition_health_box_weak_title"),description:t("webapp_credential_edition_health_box_weak_description"),secondary:t("webapp_credential_edition_health_box_view_weak")};default:return(0,ce.U)(i)}})(a,n),r=a.severity===de.bp.STRONG?"warning":"brand";return(0,$.tZ)(re.Z,{in:!0,appear:!0,timeout:600,classNames:pe},(0,$.tZ)("div",{className:"infoboxWrapper--HmImoFEcPo",sx:{backgroundColor:"ds.background.default"}},(0,$.tZ)($.ke,{title:s.title,description:s.description,mood:r,size:"large",actions:[(0,$.tZ)($.zx,{onClick:t,intensity:"quiet",key:"view_health",size:"small"},s.secondary),(0,$.tZ)(w.ua7,{passThrough:!i,key:"change_password",content:n("webapp_credential_edition_health_box_change_limited"),placement:"left",sx:{maxWidth:"312px",fontSize:2}},(0,$.tZ)($.zx,{size:"small",onClick:e,disabled:i},n("webapp_credential_edition_health_box_change_password")))]})))})),me=JSON.parse('{"v":"5.7.0","fr":30,"ip":0,"op":26,"w":240,"h":240,"nm":"Loading Light Theme","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"Null 4","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[120,122,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"load","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.05490196078,0.2078431373,0.2392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":12.5,"s":[42]},{"t":25,"s":[10]}],"ix":2},"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.2],"y":[0]},"t":0,"s":[-19]},{"t":25,"s":[341]}],"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"load 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.9058823529,0.9215686275,0.9254901961,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":".","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0}],"markers":[]}'),_e="healthInfoContainer--Oetnuw7mbu",he="loader--q4x90RGHZr",be=({credential:e})=>{const t=(0,E.k6)(),{routes:i}=(0,te.Xo)(),[n,s]=(0,a.useState)(null),r=(0,a.useCallback)((e=>s(e)),[]),l=(0,a.useCallback)((()=>s(null)),[]),d=e.sharingStatus?.isShared&&"limited"===e.sharingStatus.permission||!1,c=(0,a.useCallback)((t=>{t.preventDefault(),r(e.id)}),[e.domainIcon,e.id,e.title,e.url,r]),p=(0,a.useCallback)((e=>{e.preventDefault(),t.push(i.userPasswordHealth)}),[t,i.userPasswordHealth]),{updateIsCredentialExcluded:u}=(0,ae.$)(),{healthData:m}=(e=>{const{data:t}=(0,o.k)(ne.d,"credentialHealthData",{credentialId:e});return{healthData:t}})(e.id);return null===m?null:m?a.createElement("div",{className:_e},n?a.createElement(se.R,{credentialId:n,dismissCallback:l}):null,a.createElement("div",{className:he},a.createElement(ie.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:me}})),m.excluded?a.createElement(oe,{onPrimaryClick:()=>{u(e.id,!1)}}):a.createElement(ue,{onPrimaryClick:c,onSecondaryClick:p,isLimitedSharingPassword:d,corruptionData:m.corruptionData})):a.createElement("div",{className:_e},a.createElement("div",{className:he},a.createElement(ie.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:me}})))};var ge=i(130988),ke=i(417776),ye=i(509997),we=i(342573);const{SHARED_ACCESS:Se,ACCOUNT_DETAILS:fe}=ye.CredentialTabs,Ce=({activeTab:e,credential:t,displayTabs:i,changeTab:a,isAdmin:n})=>{const{translate:s}=(0,v.Z)(),{users:r,groups:l,collections:o}=(0,we.r)(t.id,n),d=[{active:e===fe,label:s("webapp_credential_edition_account_details"),onClick:()=>a(fe)},{active:e===Se,label:`${s("webapp_credential_edition_shared_access")} (${r.length+l.length+o.length})`,onClick:()=>a(Se)}];return(0,$.tZ)(I.V9,{icon:(0,$.tZ)(ke.h,{title:t.title,size:ge.o.LARGE,domain:new B.Y(t.url).getRootDomain()}),title:t.title,tabs:i?d:void 0})};var xe=i(526849);const{SHARED_ACCESS:ve,ACCOUNT_DETAILS:Ee,LINKED_WEBSITES:Ie}=ye.CredentialTabs,De=({location:e,activeSpaces:t,credential:i,credentialPreferences:s,onClose:r,credHasPasswordHistory:o,protectedItemsUnlockerShown:d,dashlaneDefinedLinkedWebsites:c,areProtectedItemsUnlocked:p,openProtectedItemsUnlocker:u,isShared:m,isAdmin:_})=>{var h;const{translate:z}=(0,v.Z)(),{routes:H}=(0,E.Xo)(),F=(0,C.V)(),X=(()=>{const{updateLinkedWebsites:e}=(0,k.u)(l.G),t=(0,x.w)("autofill_web_grapheneMigration_dev"),i=(0,x.w)("autofill_web_grapheneMigration");return async(a,s)=>{t||i?e({credentialId:a,updatedLinkedWebsitesList:s}):await n.C.updateLinkedWebsites({credentialId:a,updatedLinkedWebsitesDomainList:s})}})(),{createCollection:Y,updateCollection:$}=(0,k.u)(S.v),{addItemToCollections:Q,removeItemFromCollections:te}=(0,k.u)(y.a),ie=a.createRef(),ae=a.useRef(null),ne=()=>{var e,t;return{login:i.login,email:i.email,secondaryLogin:null!=(e=i.secondaryLogin)?e:"",password:i.password,autoLogin:i.autoLogin,subdomainOnly:i.subdomainOnly,onlyForThisSubdomain:i.subdomainOnly,autoProtected:i.autoProtected,protectWithMasterPassword:i.autoProtected,url:i.url,title:i.title,spaceId:i.spaceId,note:i.note,category:null!=(t=i.category?.id)?t:"",otpUrl:i.otpUrl,otpSecret:i.otpSecret}},se=()=>{const e=m&&!_;return{id:i.id,forceCategorizedSpace:i.forceCategorizedSpace,limitedPermissions:e,type:i.kwType,linkedWebsites:i.linkedWebsites}},[re,le]=a.useState(ne()),[oe,de]=a.useState((()=>{var e;const t=(0,E.CN)();return G.A[null!=(e=t.get("tab"))?e:"account-details"]})()),[ce,pe]=a.useState(Ee),[ue,me]=a.useState(!1),[_e,he]=a.useState(null!=(h=i.linkedWebsites.addedByUser)?h:[]),[ge,ke]=a.useState(!1),[ye,we]=a.useState(!1),[Se,fe]=a.useState([]),[De,Ae]=a.useState(!1),[Pe,Le]=a.useState(!1),[Ze,We]=a.useState(!1),[Te,Ne]=a.useState(null),[Ue,Ge]=a.useState(!1),[qe,Be]=a.useState(!1),{current:Re}=a.useRef({confirmDeleteConfirm:z("webapp_credential_edition_delete_confirm"),confirmDeleteDismiss:z("webapp_credential_edition_delete_dismiss"),confirmDeleteSubtitle:z("webapp_credential_edition_confirm_delete_subtitle"),confirmDeleteTitle:z("webapp_credential_edition_confirm_delete_title"),lastAdminActionLabel:z("webapp_credential_edition_change_permissions"),lastAdminTitle:z("webapp_credential_edition_last_admin_title"),lastAdminSubtitle:z("webapp_credential_edition_last_admin_subtitle"),groupSharingTitle:z("webapp_credential_edition_group_sharing_title"),groupSharingSubtitle:z("webapp_credential_edition_group_sharing_subtitle")});a.useEffect((()=>()=>{ae.current&&clearTimeout(ae.current)}),[]),a.useEffect((()=>{var e,t,a;t=_e,a=null!=(e=i?.linkedWebsites.addedByUser)?e:[],[...t,...a].filter(Boolean).some((e=>!(t.includes(e)&&a.includes(e))))&&me(!0)}),[_e,i.linkedWebsites.addedByUser]),(0,a.useEffect)((()=>{oe===Ee&&le(ne())}),[oe]),(0,a.useEffect)((()=>{const e=!(0,xe.equals)(re,ne());me(e)}),[re]);const Ve=e=>{ue?(pe(e),Le(!0)):de(e)},ze=()=>{Le(!1),Ae(!1),fe([])},He=e=>{ke(e),Ve(Ie)},Oe=()=>{de(Ee),me(!1),ze()},Fe=e=>{e?.preventDefault(),ue?(pe(Ee),Ae(!0)):Oe()},Je=()=>{X(i.id,_e),We(!0),(async(e,t)=>{const i=t.filter((t=>t&&!e.linkedWebsites.addedByUser.includes(t))),a=e.linkedWebsites.addedByUser.filter((e=>e&&!t.includes(e))),n=new B.Y(e.url).getRootDomain();(0,R.Kz)(new q.AnonymousUpdateCredentialEvent({action:q.Action.Edit,associatedWebsitesAddedList:await V(i),associatedWebsitesRemovedList:await V(a),fieldList:[q.Field.AssociatedWebsitesList],domain:{type:q.DomainType.Web,id:await(0,q.hashDomain)(n)},space:e.spaceId?q.Space.Professional:q.Space.Personal})),(0,R.Kz)(new q.UserUpdateVaultItemEvent({action:q.Action.Edit,itemId:e.id,itemType:q.ItemType.Credential,fieldsEdited:[q.Field.AssociatedWebsitesList],space:e.spaceId?q.Space.Professional:q.Space.Personal}))})(i,_e),Oe()},Me=e=>!e.initiallyExisting&&!e.hasBeenDeleted,Xe=e=>e.initiallyExisting&&!e.hasBeenDeleted,je=oe===Ie?(e,t)=>Fe(t):()=>{e?.state?.entity?(0,W.d)({routes:H,location:e}):r()},Ke=ye||d;return a.createElement(I.zI,{isViewingExistingItem:!0,itemHasBeenEdited:ue,isSomeDialogOpen:De||Se.length>0||Pe||qe||!!Te,onSubmit:async()=>{if(oe===Ie)return void(async()=>{const e=await(async(e,t)=>{const i=t.filter((t=>t&&!e.linkedWebsites.addedByUser.includes(t))).map((e=>new B.Y(e).getRootDomain())),a=i.map((async t=>await n.C.getCredentialsByDomain(((e,t)=>({domain:e,sortToken:{sortCriteria:[{field:"lastUse",direction:"descend"}],uniqField:"id"},filterToken:{filterCriteria:[{field:"email",value:t,type:"equals"}]}}))(t,e.email))));return(await Promise.all(a)).map(((e,t)=>({...e,linkedWebsite:i[t]}))).filter((e=>e.matchingCount>0)).map((e=>({credentialName:e.items[0].title,linkedWebsite:e.linkedWebsite})))})(i,_e);fe(e),oe!==Ie||e.length||Je()})();if(!ie.current?.isFormValid())return;const e=ie.current?.getVaultItemCollections();if(ue&&!e)return;var t;Ge(!0),s&&re.autoProtected&&re.autoProtected!==s.requireMasterPassword&&(0,N.ih)(re.autoProtected,i.id,i.url,null!=(t=re.spaceId)?t:void 0);const a={kwType:"KWAuthentifiant",origin:g.SaveOrigin.MANUAL,content:{...re,...se()},shouldSkipSync:e?.some((e=>e.isShared&&!Xe(e)))},l=await n.C.savePersonalDataItem(a);if(l.success&&e)try{await(async(e,t)=>{const i=[],a=[];for(const n of t)Xe(n)||(n.isShared?Me(n)?i.push(n.id):a.push(n.id):(n.vaultItems=[{id:e,type:g.DataModelType.KWAuthentifiant}],n.id?await $({id:n.id,collection:n,operationType:n.hasBeenDeleted?f.C.SUBSTRACT_VAULT_ITEMS:f.C.APPEND_VAULT_ITEMS}):await Y({content:n})));i.length&&await Q({collectionIds:i,itemId:e,shouldSkipSync:a.length>0}),a.length&&await te({collectionIds:a,itemId:e})})(l.itemId,e)}catch(e){return F.showAlert(z("_common_generic_error"),w.BLW.ERROR),void r()}F.showAlert(z("_common_toast_changes_saved"),w.BLW.SUCCESS),r()},secondaryActions:oe===Ie?[]:[a.createElement(ee,{key:"pwhist",credentialId:i.id,credHasPasswordHistory:o}),a.createElement(P.N,{item:i,getSharing:e=>(0,Z.Ei)(e),key:"shareaction"})],onNavigateOut:je,onClickDelete:()=>{const{sharingStatus:e}=i;if(e.isShared){if(e.groupSharing)return void Ne({reason:L.J.GroupSharing});if(e.lastAdmin)return void Ne({reason:L.J.LastAdmin})}we(!0)},withoutDeleteButton:oe===Ie,withoutConfirmationDialog:oe===Ie,ignoreCloseOnEscape:Ke,formId:"edit_credential_panel",submitPending:Ue,header:a.createElement(Ce,{activeTab:oe,credential:i,displayTabs:m,changeTab:Ve,isAdmin:_})},m&&oe===ve?a.createElement(T.u,{isAdmin:_,id:i.id}):null,oe===Ee?a.createElement("div",{className:"healthEditContainer--lJ8iSk3hnU"},a.createElement(be,{credential:i}),a.createElement("div",{className:b()(O.Z.form,"formWithHealth--rKaIE4Sw6v")},a.createElement(U.S,{ref:ie,editableValues:re,setEditableValues:le,readonlyValues:se(),signalEditedValues:e=>{me(e)},additionalProps:{activeSpaces:t,dashlaneDefinedLinkedWebsites:c,areProtectedItemsUnlocked:p,openProtectedItemsUnlocker:u,protectedItemsUnlockerShown:d,onClickLinkedWebsitesCount:()=>He(!1),onClickAddNewWebsite:()=>He(!0),setHasOpenedDialogs:Be}}))):null,oe===Ie?a.createElement(J,{credential:i,dashlaneDefinedLinkedWebsites:c,onClose:Fe,openWithNewUrlField:ge,onUpdateLinkedWebsitesAddedByUser:he,hasLimitedRights:m&&!_}):null,ye?a.createElement(D.h,{closeConfirmDeleteDialog:()=>we(!1),onDeleteConfirm:async()=>{await n.C.removePersonalDataItem({id:i.id})},translations:Re}):null,Te?a.createElement(D.Z,{reason:Te.reason,translations:Re,goToSharingAccess:()=>{Ne(null),Ve(ve)},closeCantDeleteDialog:()=>Ne(null)}):null,De?a.createElement(j,{onCancel:()=>Ae(!1),onLeavePageWithoutSaving:Oe}):null,Se.length>0?a.createElement(K,{duplicateData:Se,onCancel:()=>fe([]),onSave:Je}):null,Pe?a.createElement(A.a,{onDismissClick:()=>Le(!1),onConfirmClick:()=>{de(ce),me(!1),ze()}}):null,Ze?a.createElement(M,{onClose:()=>We(!1),setDisplayLinkedWebsitesDataSavedAlert:We}):null)},Ae=e=>{const{credential:t}=e,i=(0,_.tY)(),n=(0,o.k)(l.G,"getDashlaneDefinedLinkedWebsites",{url:t.url}),s=(0,o.k)(m.L,"tempCredentialPreferences",{credentialId:t.id}),{getPermissionForItem:r,getSharingStatusForItem:h}=(0,d.Y)(p.X,{getPermissionForItem:{queryParam:{itemId:t.id}},getSharingStatusForItem:{queryParam:{itemId:t.id}}},[]),b=n.data,g=s.data,k=!!h.data?.isShared,y=k&&r.data?.permission===u.y3.Admin;return s.status===c.rq.Loading||n.status===c.rq.Loading||r.status===c.rq.Loading||h.status===c.rq.Loading?null:a.createElement(De,{...e,...i,dashlaneDefinedLinkedWebsites:b,credentialPreferences:g,credential:t,isShared:k,isAdmin:y})},Pe=e=>`{${e.match.params?.uuid||""}}`,Le={activeSpaces:{query:n.C.getActiveSpaces},credential:{live:n.C.liveCredential,liveParam:Pe,query:n.C.getCredential,queryParam:Pe},credHasPasswordHistory:{query:n.C.getHasPasswordHistory,queryParam:Pe}},Ze={strategies:Le},We=(0,s.$)((0,r.i)((e=>{const{credential:t,onClose:i}=e;return a.useEffect((()=>{t||i()}),[t]),t?a.createElement(Ae,{...e}):null}),Ze),Le)},702394:(e,t,i)=>{i.d(t,{Z:()=>c,h:()=>d});var a=i(696832),n=i(142897),s=i(159515),r=i(151796),l=i(201389),o=i(177704);const d=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:s}=(0,l.Z)(),{confirmDeleteSubtitle:r,confirmDeleteTitle:d,confirmDeleteDismiss:c,confirmDeleteConfirm:p}=i;return a.createElement(n.Vq,{title:d,onClose:e,isOpen:!0,dialogClassName:o.Ht,closeActionLabel:s("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:p,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:c,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}}},r)},c=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:o})=>{const{translate:d}=(0,l.Z)(),c=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:a,genericErrorTitle:n}=e;switch(t){case s.J.LastAdmin:return a;case s.J.GroupSharing:return i;case s.J.Generic:return n;default:return(0,r.U)(t)}})(t,e),p=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:a,genericErrorSubtitle:n}=e;switch(t){case s.J.LastAdmin:return a;case s.J.GroupSharing:return i;case s.J.Generic:return n;default:return(0,r.U)(t)}})(t,e);return a.createElement(n.Vq,{isOpen:!0,onClose:o,title:null!=c?c:"",closeActionLabel:d("_common_dialog_dismiss_button"),actions:e===s.J.LastAdmin?{primary:{children:t.lastAdminActionLabel,onClick:i}}:void 0},p)}},372814:(e,t,i)=>{i.d(t,{N:()=>l});var a=i(696832),n=i(661410),s=i(201389),r=i(508461);const l=({item:e,getSharing:t})=>{const{translate:i}=(0,s.Z)();if(!(e=>e&&(!e.sharingStatus.isShared||"admin"===e.sharingStatus.permission)&&!e.attachments.length)(e))return null;const l=t(e.id);return a.createElement(r.Z,{tooltipPlacement:"top-start",sharing:l,text:i("webapp_sharing_invite_share"),origin:n.Origin.ItemDetailView})}},159515:(e,t,i)=>{let a;i.d(t,{J:()=>a}),function(e){e[e.LastAdmin=0]="LastAdmin",e[e.GroupSharing=1]="GroupSharing",e[e.Generic=2]="Generic"}(a||(a={}))},342573:(e,t,i)=>{i.d(t,{r:()=>b});var a=i(133354),n=i(604400),s=i(242542),r=i(385441),l=i(799852);const o=e=>{const t=(e=>(0,l.k)(r.a,"getSharedCollections",{collectionIds:e}))(e);return t.status===a.rq.Success?t.data:[]};var d=i(148038),c=i(66941),p=i(526849);const u=(e,t,i=!1)=>({recipientId:e.groupId,recipientName:e.name,isGroup:!0,permission:e.permission,status:e.status,isAdmin:t,isInSharedCollection:i}),m=(e,t,i=!1)=>({recipientId:e.userId,recipientName:e.alias,isGroup:!1,permission:e.permission,status:e.status,isAdmin:t,isInSharedCollection:i}),_=e=>({recipientId:e.uuid,recipientName:e.name,isGroup:!1,status:n.qb.Accepted,permission:n.y3.Admin,isAdmin:!0,isInSharedCollection:!0}),h=(0,p.sortBy)((0,p.compose)(p.toLower,(0,p.prop)("recipientName")));function b(e,t){const{collectionIds:i,itemGroupId:r,isReady:l}=(0,s.b)(e),p=function(e){return(0,d.qr)({queryConfig:{query:c.C.getGroupRecipients,queryParam:e},liveConfig:{live:c.C.liveGroupRecipients,liveParam:e}},[])}(e),b=function(e){return(0,d.qr)({queryConfig:{query:c.C.getUserRecipients,queryParam:e},liveConfig:{live:c.C.liveUserRecipients,liveParam:e}},[])}(e),g=o(i),k=i.length?g:[];if(b.status!==a.rq.Success||p.status!==a.rq.Success||!l)return{isReady:!1,users:[],groups:[],collections:[]};const y=b.data.map((e=>m(e,t))),w=p.data.map((e=>u(e,t))),S=k.map((e=>_(e))),f=h(y),C=h(w),x=h(S),v=t&&f.filter((({permission:e,status:t})=>e===n.y3.Admin&&t===n.qb.Accepted)).length<2;return{users:f,groups:C,itemGroupId:r,isReady:!0,collections:x,isLastAdmin:v}}},642844:(e,t,i)=>{i.d(t,{u:()=>C});var a,n,s=i(696832),r=i(142897),l=i(441217),o=i(453576),d=i(66941),c=i(201389),p=i(427658),u=i(993026),m=i(351433),_=i(683773),h=i(360592),b=i(220315),g=i(716514);const k=({cancelStatus:e,itemGroupId:t,setCancelStatus:i,recipientId:o})=>{const{translate:p}=(0,c.Z)(),m=e===u.V.Loading,_={type:"user",alias:o};(0,s.useEffect)((()=>{let t;return e===u.V.Failure&&(t=window.setTimeout((()=>i(null)),2e3)),()=>{clearTimeout(t)}}),[e,i]);const h=e?()=>i(null):()=>i(u.V.Confirm);return e===u.V.Failure?(0,r.tZ)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"}},a||(a=(0,r.tZ)(l.aNP,{color:"ds.text.danger.standard"})),"Â ",p("webapp_shared_access_cancel_failure")):(0,r.tZ)("div",null,(0,r.tZ)(r.zx,{intensity:e?"quiet":"supershy",disabled:m,onClick:h},p(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")),e?(0,r.tZ)(r.zx,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:m,onClick:()=>(async()=>{i(u.V.Loading);const e=await(async()=>{try{const{success:e}=await d.C.revokeSharing({itemGroupId:t,recipient:_});return e}catch(e){return!1}})();i(e?u.V.Success:u.V.Failure)})()},m?n||(n=(0,r.tZ)(l.HoD,null)):p("webapp_shared_access_confirm")):null)};var y;const w=e=>{const{status:t,permission:i}=e;return"pending"===t?"webapp_shared_access_pending_invitation":"accepted"===t?"admin"===i?"webapp_sharing_permissions_full_rights":"webapp_sharing_permissions_limited_rights":""},S=({itemGroupId:e,openEditPermissionsDialog:t,member:i})=>{const[a,n]=(0,s.useState)(null),l=(0,g.j)()?.login,{translate:o}=(0,c.Z)();if(a===u.V.Success)return null;const{permission:d,status:p}=i,S=i.isAdmin&&l!==i.recipientId,f="pending"===p?(0,r.tZ)(k,{recipientId:i.recipientId,itemGroupId:e,cancelStatus:a,setCancelStatus:n}):(0,r.tZ)(h.M,{disabled:i.isInSharedCollection,intensity:"supershy",onClick:()=>t((e=>e.isGroup?{type:"userGroup",groupId:e.recipientId,name:e.recipientName}:{type:"user",alias:e.recipientId})(i),d),content:o("webapp_sharing_collection_access_description_tooltip"),tooltipSx:{textWrap:"wrap",maxWidth:"240px"}},o("webapp_shared_access_edit_permissions"));return(0,r.tZ)("li",{key:i.recipientId,sx:{alignItems:"center",borderStyle:"solid",borderBottomWidth:"1px",borderColor:"ds.border.neutral.standard.idle",display:"flex",minHeight:"64px",position:"relative"}},(0,r.tZ)(_.r,{infoAction:S?f:null,logo:i.isGroup?y||(y=(0,r.tZ)(b.Z,null)):(0,r.tZ)(m.q,{email:i.recipientName,size:36}),text:o(w(i)),title:i.recipientName,disabled:a===u.V.Loading}))};var f=i(342573);const C=({id:e,isAdmin:t})=>{const{translate:i}=(0,c.Z)(),[a,n]=(0,s.useState)(!1),[m,_]=(0,s.useState)(null),{isReady:h,itemGroupId:b,users:g,groups:k,collections:y}=(0,f.r)(e,t);if(!h)return(0,r.tZ)(l.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});const w=e=>{m&&_({...m,step:e})},C=async()=>{if(!m)return;const{recipient:e,permission:t}=m;n(!0);const i="revoke"===t?await(async e=>{try{const{success:t}=await d.C.revokeSharing({itemGroupId:null!=b?b:"",recipient:e});return t}catch(e){return!1}})(e):await(async(e,t)=>{try{const{success:i}=await d.C.updateSharingPermission({itemGroupId:null!=b?b:"",recipient:e,permission:t});return i}catch(e){return!1}})(e,t);if(i){const e="revoke"===t?u.PermissionDialogStep.RevokeSuccess:u.PermissionDialogStep.Success;w(e)}else w(u.PermissionDialogStep.Failure);n(!1)},x=(e,t)=>{const i={recipient:e,permission:t,originPermission:t,step:u.PermissionDialogStep.Permission,name:(0,o.isGroupRecipient)(e)?e.name:e.alias};_(i)};return(0,r.tZ)("div",{sx:{flex:"1",overflowY:"auto",p:"24px"}},y?.length?(0,r.tZ)(s.Fragment,null,(0,r.tZ)(r.X6,{as:"h3",textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",sx:{textTransform:"uppercase"}},i("webapp_shared_access_collections")),(0,r.tZ)("ul",{sx:{flex:"1"}},y.map((e=>(0,r.tZ)(S,{key:e.recipientId,member:e,itemGroupId:null!=b?b:"",openEditPermissionsDialog:x}))))):null,k?.length||g?.length?(0,r.tZ)(s.Fragment,null,(0,r.tZ)(r.X6,{as:"h3",textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",sx:{m:"20px 0 0 0",textTransform:"uppercase"}},i("webapp_shared_access_users_groups")),(0,r.tZ)("ul",{sx:{flex:"1"}},k.map((e=>(0,r.tZ)(S,{key:e.recipientId,member:e,itemGroupId:null!=b?b:"",openEditPermissionsDialog:x}))),g.map((e=>(0,r.tZ)(S,{key:e.recipientId,member:e,itemGroupId:null!=b?b:"",openEditPermissionsDialog:x}))))):null,m&&(0,r.tZ)(p.E,{isOpen:!0,loading:a,onCancelRevoke:()=>{m&&_({...m,step:u.PermissionDialogStep.Permission})},onConfirmRevoke:C,onDismiss:()=>_(null),onSelectPermission:e=>{m&&_({...m,permission:e})},onValidatePermission:()=>{"revoke"===m?.permission?_({...m,step:u.PermissionDialogStep.ConfirmRevoke}):C()},originPermission:m.originPermission,permission:m.permission,recipient:m.recipient,step:m.step}))}},880706:(e,t,i)=>{i.d(t,{d:()=>s});var a=i(528144),n=i(635164);const s=({routes:e,location:t})=>{t?.state?.entity?(0,a.yy)(t?.state?.entity)?(0,n.uX)(e.userSharingGroupInfo(t?.state?.entity?.groupId)):(0,n.uX)(e.userSharingUserInfo(t?.state?.entity?.alias)):(0,n.uX)(e.userSharingCenter)}}}]);
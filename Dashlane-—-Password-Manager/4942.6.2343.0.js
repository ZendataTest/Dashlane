"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[4942],{619733:(e,t,a)=>{a.d(t,{N:()=>l});var s=a(696832),n=a(383849),i=a.n(n);const l=({disableHover:e=!1,...t})=>{const[a,n]=s.useState(!1),{children:[l,...r]=[]}=t;return s.createElement("div",{className:"buttonsContainer--TiPIoxROXR",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},l,t.enabled&&s.createElement("span",{className:i()("buttons--p98QFrEo3f",{"visible--aWYlZRshE_":e||a})},r))}},313661:(e,t,a)=>{a.d(t,{Z:()=>_});var s=a(696832),n=a(554712),i=a(383849),l=a.n(i),r=a(526849),o=a(769183),d=a(317894),p=a.n(d),c=a(142897),u=a(654),h=a(83126);const m=e=>{navigator.clipboard.writeText(e.replaceAll(" ",""))};class _ extends s.Component{constructor(e){super(e),this.field=void 0,this.handleChange=e=>{this.setState({selectionRangeStart:e.target.selectionStart,selectionRangeEnd:e.target.selectionEnd}),this.props.onChange&&this.props.onChange(e)},this.state={fieldHtmlId:(0,o.Z)(),selectionRangeStart:null,selectionRangeEnd:null}}componentDidUpdate(){null!==this.state.selectionRangeStart&&null!==this.state.selectionRangeEnd&&this.field.setSelectionRange(this.state.selectionRangeStart,this.state.selectionRangeEnd)}shouldComponentUpdate(e,t){return!((0,r.equals)(this.props.value,e.value)&&(0,r.equals)(this.props.error,e.error)&&(0,r.equals)(this.props.mask,e.mask)&&(0,r.equals)(this.props.label,e.label)&&(0,r.equals)(this.state.selectionRangeStart,t.selectionRangeStart)&&(0,r.equals)(this.state.selectionRangeEnd,t.selectionRangeEnd))}getValue(){return this.field.value}focus(){this.field.focus()}getTextarea(){var e;return(0,c.tZ)(n.Z,{inputRef:e=>{this.field=e},id:this.state.fieldHtmlId,disabled:this.props.disabled,value:null!=(e=this.props.value)?e:"",name:this.props.name,"data-name":this.props.dataName,sx:{borderColor:this.props.error&&"ds.border.danger.standard.idle"},className:h.Z.textarea,placeholder:this.props.placeholder,onBlur:this.props.handleFieldBlur,onKeyDown:this.props.onFieldKeyDown,onChange:this.handleChange})}getInput(){var e;const t={onBlur:this.props.handleFieldBlur,onChange:this.handleChange,disabled:this.props.disabled,readOnly:this.props.readOnly,value:null!=(e=this.props.value)?e:""},a={ref:e=>{this.field=e},id:this.state.fieldHtmlId,autoComplete:"off",className:l()(h.Z.input,{[h.Z.error]:Boolean(this.props.error)}),sx:{...this.props.error&&{"::placeholder":{color:"ds.text.danger.quiet"},minWidth:"fit-content"},border:"1px solid",borderColor:this.props.error?"ds.border.danger.standard.idle":"transparent"},name:this.props.name,"data-name":this.props.dataName,type:this.props.type||"text",placeholder:this.props.placeholder,onKeyDown:this.props.onFieldKeyDown};return this.props.mask?(0,c.tZ)(p(),{...t,...this.props.maskProps,mask:this.props.mask,onCopy:()=>m(t.value),onCut:()=>m(t.value)},(e=>(0,c.tZ)("input",{...a,...e}))):(0,c.tZ)("div",{className:h.Z.inputRow},(0,c.tZ)("input",{...a,...t}),(0,c.tZ)("div",{hidden:!this.props.error||"string"!=typeof this.props.error,sx:{color:"ds.text.danger.quiet"},className:h.Z.errorMessage},this.props.error))}render(){const e="password"!==this.props.type?this.props.value||this.props.placeholder:"";return(0,c.tZ)("div",{className:l()(h.Z.container,this.props.multiLine?h.Z.containerMultiLine:null)},this.props.label&&(0,c.tZ)("label",{className:h.Z.label,sx:{color:"ds.text.neutral.catchy"},htmlFor:this.state.fieldHtmlId},(0,c.tZ)("span",{className:h.Z.text,title:this.props.label},this.props.label)),(0,c.tZ)(u.Z,{tooltipText:e,className:l()(h.Z.value,{[h.Z.placeholder]:!this.props.value,[h.Z.multiline]:this.props.multiLine})},this.props.multiLine?this.getTextarea():this.getInput()))}}_.defaultProps={maskProps:{maskChar:""}}},449354:(e,t,a)=>{a.d(t,{d:()=>c}),a(696832);var s,n=a(142897),i=a(5727),l=a(441217),r=a(619733),o=a(313661),d=a(201389);const p="webapp_credential_edition_field_website_action_goto",c=({url:e,hasUrlError:t,disabled:a,editViewButtonEnabled:c,limitedPermissions:u=!1,handleChange:h,handleGoToWebsite:m})=>{const{translate:_}=(0,d.Z)();return(0,i.tZ)(r.N,{enabled:c,disableHover:!0},(0,i.tZ)(o.Z,{label:_("webapp_credential_edition_field_website"),placeholder:_("webapp_credential_edition_field_placeholder_no_url"),dataName:"url",disabled:a,value:e,error:t,readOnly:u,onChange:h}),(0,i.tZ)(l.ua7,{placement:"top",content:_(p)},(0,i.tZ)(n.zx,{mood:"neutral",intensity:"supershy",type:"button",onClick:m,sx:{border:"none",minWidth:"fit-content",padding:"10px"},role:"link","aria-label":_(p)},s||(s=(0,i.tZ)(l.RTC,null)))))}},702394:(e,t,a)=>{a.d(t,{Z:()=>p,h:()=>d});var s=a(696832),n=a(142897),i=a(159515),l=a(151796),r=a(201389),o=a(177704);const d=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:a})=>{const{translate:i}=(0,r.Z)(),{confirmDeleteSubtitle:l,confirmDeleteTitle:d,confirmDeleteDismiss:p,confirmDeleteConfirm:c}=a;return s.createElement(n.Vq,{title:d,onClose:e,isOpen:!0,dialogClassName:o.Ht,closeActionLabel:i("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:c,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:p,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}}},l)},p=({reason:e,translations:t,goToSharingAccess:a,closeCantDeleteDialog:o})=>{const{translate:d}=(0,r.Z)(),p=((e,t)=>{const{groupSharingTitle:a,lastAdminTitle:s,genericErrorTitle:n}=e;switch(t){case i.J.LastAdmin:return s;case i.J.GroupSharing:return a;case i.J.Generic:return n;default:return(0,l.U)(t)}})(t,e),c=((e,t)=>{const{groupSharingSubtitle:a,lastAdminSubtitle:s,genericErrorSubtitle:n}=e;switch(t){case i.J.LastAdmin:return s;case i.J.GroupSharing:return a;case i.J.Generic:return n;default:return(0,l.U)(t)}})(t,e);return s.createElement(n.Vq,{isOpen:!0,onClose:o,title:null!=p?p:"",closeActionLabel:d("_common_dialog_dismiss_button"),actions:e===i.J.LastAdmin?{primary:{children:t.lastAdminActionLabel,onClick:a}}:void 0},c)}},159515:(e,t,a)=>{let s;a.d(t,{J:()=>s}),function(e){e[e.LastAdmin=0]="LastAdmin",e[e.GroupSharing=1]="GroupSharing",e[e.Generic=2]="Generic"}(s||(s={}))},794942:(e,t,a)=>{a.r(t),a.d(t,{Connected:()=>R});var s=a(696832),n=a(448430),i=a(382706),l=a(799852),r=a(352116),o=a(142897),d=a(441217),p=a(796446),c=a(22393),u=a(635164),h=a(201389),m=a(66941),_=a(60043),g=a(787268),b=a(702394),f=a(661410),y=a(164718),k=a(313661),Z=a(62429),w=a(447725),C=a(449354),v=a(839434);const x=({passkeyContent:e,spaceDetails:t,signalEditedValues:a})=>{var n;const{translate:i}=(0,h.Z)(),l=null!=(n=t?.teamName)?n:i("webapp_credential_edition_field_space_personal"),{userDisplayName:r,rpId:d,itemName:p,note:c,spaceId:u,id:m}=e;(0,s.useEffect)((()=>{(0,Z.Nc)(f.PageView.ItemPasskeyDetails)}),[]);const _=t=>s=>{const n="string"==typeof s?s:s.target.value;a({...e,[t]:n})},g=Boolean(t?.info.forcedDomainsEnabled&&e.spaceId===t?.teamId);return(0,o.tZ)(s.Fragment,null,(0,o.tZ)("div",{sx:{marginBottom:"32px"}},(0,o.tZ)(k.Z,{key:"passkeyUsername",disabled:!0,value:r,label:i("webapp_passkey_edition_field_username"),placeholder:i("webapp_passkey_edition_field_username_placeholder")}),(0,o.tZ)(C.d,{url:d,hasUrlError:!1,disabled:!0,editViewButtonEnabled:!0,limitedPermissions:!1,handleChange:(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.")},handleGoToWebsite:()=>{(0,Z.Kz)(new f.UserOpenExternalVaultItemLinkEvent({itemId:m,itemType:f.ItemTypeWithLink.Passkey,domainType:f.DomainType.Web})),(0,w.Yo)(new y.Y(d).getUrlWithFallbackHttpsProtocol())}})),(0,o.tZ)(k.Z,{key:"passkeyItemName",value:null!=p?p:r,onChange:_("itemName"),label:i("webapp_passkey_edition_field_item_name"),placeholder:i("webapp_passkey_edition_field_item_name_placeholder")}),(0,o.tZ)(o.u,{content:i("webapp_passkey_edition_field_force_categorized",{space:l}),passThrough:!g},(0,o.tZ)("div",null,(0,o.tZ)(v.M,{spaceId:u,labelSx:v.e,isDisabled:g,onChange:e=>_("spaceId")(e)}))),(0,o.tZ)(k.Z,{label:i("webapp_passkey_edition_field_notes"),placeholder:i("webapp_passkey_edition_field_placeholder_no_notes"),dataName:"note",value:c,onChange:_("note"),multiLine:!0}))};var E;const D="_common_generic_error",I=({item:e})=>{var t;const{routes:a}=(0,_.Xo)(),{translate:n}=(0,h.Z)(),{openDialog:i,closeDialog:l}=(0,c.R)(),f=(0,u.k6)(),y=(0,g.V)(),{spaceDetails:k}=(0,r.fV)(),[Z,w]=s.useState(e),[C,v]=s.useState(!1),[I,R]=s.useState(!1),S=()=>{l(),f.push(a.userPasskeys)},N={confirmDeleteConfirm:n("webapp_passkey_edition_delete_confirm"),confirmDeleteDismiss:n("webapp_passkey_edition_delete_dismiss"),confirmDeleteSubtitle:n("webapp_passkey_edition_delete_text"),confirmDeleteTitle:n("webapp_passkey_edition_delete_header")},L=async()=>{if(e)if((await m.C.deletePasskey({id:e.id})).success){const t=n("webapp_passkey_edition_name_delete_alert",{passkey:e.rpName});y.showAlert(t,d.BLW.SUBTLE)}else y.showAlert(n(D),d.BLW.ERROR);S()},T=s.useRef({}),A=s.useCallback((t=>{Object.entries(t).forEach((([t,a])=>{e[t]!==a?T.current[t]=a:delete T.current[t]})),R(Object.keys(T.current).length>0),w(t)}),[e]),P=()=>{if(k?.info.forcedDomainsEnabled&&Z.spaceId!==k.teamId){const e=Z.userDisplayName?.split("@")[1];if(k.info.teamDomains.includes(e))return k.teamId}return Z.spaceId};return(0,o.tZ)(p.zI,{itemHasBeenEdited:I,isViewingExistingItem:!0,onNavigateOut:S,onClickDelete:()=>{i(t||(t=(0,o.tZ)(b.h,{closeConfirmDeleteDialog:l,onDeleteConfirm:L,translations:N})))},onSubmit:async()=>{if(!C){v(!0);try{if(!0===(await m.C.updatePasskey({id:e.id,spaceId:P(),...T.current})).success){const t=n("webapp_passkey_edition_name_update_alert",{passkey:e.rpName});y.showAlert(t,d.BLW.SUCCESS),f.push(a.userPasskeys)}else v(!1)}catch(e){v(!1),y.showAlert(n(D),d.BLW.ERROR)}}},formId:"edit_passkey_panel",header:(0,o.tZ)(p.V9,{icon:(0,o.tZ)("div",{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"147px",height:"98px"}},E||(E=(0,o.tZ)(o.JO,{name:"PasskeyOutlined",size:"xlarge",color:"white"}))),iconBackgroundColor:"ds.container.expressive.brand.catchy.active",title:e.rpName})},(0,o.tZ)(x,{passkeyContent:Z,signalEditedValues:A,spaceDetails:k}))},R=e=>{const{data:t}=(0,l.k)(n.L,"query",{vaultItemTypes:[i.U.Passkey],ids:[`{${e.match.params.uuid}}`]});return t?.passkeysResult.items.length?s.createElement(r.qc,{lee:e.lee},s.createElement(I,{...e,item:t.passkeysResult.items[0]})):null}},83126:(e,t,a)=>{a.d(t,{Z:()=>s});const s={container:"container--Qypu77vxOn",containerMultiLine:"containerMultiLine--ncWYFwQEnR",_field:"_field--KII5X4xmLN",input:"input--Iq10hxAz32 _field--KII5X4xmLN",inputRow:"inputRow--gdD_j5S1R8",textarea:"textarea--VpIWTZemV2 _field--KII5X4xmLN",label:"label--Ww_r49kt_J",text:"text--oXyCzpUMwG",value:"value--aD7nWEqBIq",multiline:"multiline--fdPM1KFHPT"}}}]);